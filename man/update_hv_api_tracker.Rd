% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/update_hv_api_tracker.R
\name{update_hv_api_tracker}
\alias{update_hv_api_tracker}
\title{Update the HydroVu API tracking system with success/failure information}
\usage{
update_hv_api_tracker(
  post_munged_data_list,
  hv_api_tracking_file_path,
  hv_api_tracking_archive_dir_path,
  auto_disable_threshold = 56,
  try_again_threshold = 7,
  sys_time_arg = Sys.time(),
  synapse_env = FALSE,
  fs = NULL
)
}
\arguments{
\item{post_munged_data_list}{A list of dataframes containing the results of the most
recent HydroVu API data retrieval attempt. Each list element should represent a
site-parameter combination and be named using the "site-parameter" convention.}

\item{hv_api_tracking_file_path}{File path to the parquet file that stores the current
tracking information for all site-parameter combinations.}

\item{hv_api_tracking_archive_dir_path}{Directory path where historical tracking files
should be archived.}

\item{auto_disable_threshold}{Numeric value specifying the number of consecutive failures
required before a site-parameter combination is automatically disabled. Default is 56.
A failure would be a failed \code{api_puller()} call for that site, which would be a 3-hour
chunk of data. 56 consecutive failures would align with a week of failed HydroVu
API requests.}

\item{try_again_threshold}{Numeric value specifying the number of days after which a
disabled site-parameter combination should be attempted again. Default is 7.}

\item{sys_time_arg}{POSIXct datetime object used for timestamp calculations. Default is
the current system time from Sys.time().}

\item{synapse_env}{Logical, indicating whether function is running in Azure Synapse
environment (TRUE) or local environment (FALSE). Default is FALSE.}

\item{fs}{Optional filesystem object for Azure Data Lake Storage operations when
running in Synapse environment.}
}
\value{
No direct return value. The function updates the tracking file in the specified
location and archives the previous version. A message is printed indicating the
location of the new tracking file.
}
\description{
Maintains a tracking system that monitors the success or failure of data retrieval attempts
for each site-parameter combination from the HydroVu API. This function analyzes the results
of the most recent data retrieval operation (\code{api_puller()}) and updates tracking metrics accordingly.

The function implements a tracking mechanism that:
\itemize{
\item Counts consecutive failures for each site-parameter combination
\item Records timestamps of successful retrievals
\item Automatically disables problematic combinations after a threshold of failures
\item Schedules periodic retry attempts for disabled combinations
}

This tracking system helps maintain pipeline stability by intelligently managing
problematic data sources without disrupting data collection for functioning sensors.
}
\examples{
# Examples are temporarily disabled

}
\seealso{
\code{\link[=get_start_dates]{get_start_dates()}}

\code{\link[=api_puller]{api_puller()}}

\code{\link[=move_api_data]{move_api_data()}}
}
