% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/add_malfunction_flag.R
\name{add_malfunction_flag}
\alias{add_malfunction_flag}
\title{Flag known sensor malfunctions from field notes}
\usage{
add_malfunction_flag(df, malfunction_records)
}
\arguments{
\item{df}{A data frame containing water quality measurements. Must include columns:
\itemize{
\item \code{site}: Standardized site name
\item \code{parameter}: The measurement type
\item \code{DT_round}: Timestamp for each measurement, in UTC
\item \code{flag}: Existing quality flags
}}

\item{malfunction_records}{A data frame containing records of known sensor malfunctions
with columns:
\itemize{
\item \code{site}: Site name matching the df site column
\item \code{parameter}: Parameter name (NA indicates the entire sonde was malfunctioning)
\item \code{start_DT}: Start timestamp of the malfunction period, in UTC
\item \code{end_DT}: End timestamp of the malfunction period (NA indicates ongoing), in UTC
\item \code{notes}: Text description of the malfunction
}}
}
\value{
A data frame with the same structure as the input, plus a \code{mal_flag} column
containing descriptions of malfunction types for affected measurements.
}
\description{
Adds malfunction flags to water quality data based on field technician observations
and notes. This function identifies periods when sensors were known to be malfunctioning
and categorizes these into specific types of malfunctions.

The function uses a separate \code{mal_flag} column rather than the standard \code{flag} column,
allowing malfunction information to be treated differently in downstream processing.
}
\examples{
# Examples are temporarily disabled
}
\seealso{
\code{\link[=grab_mWater_malfunction_notes]{grab_mWater_malfunction_notes()}}
}
